{% extends "layout/base.html" %}

{% block content %}
  <div class="container">
    <form class="row" role="search"
        {% if not results %}
          style="margin-top: 15%"
        {% endif %}>
      <div
        {% if results %}
          class="col-md-3 form-group"
        {% else %}
          class="col-md-6 col-md-offset-3 form-group"
        {% endif %}>

       <input type="text" class="autocomplete form-control" name="search_term" placeholder="Enter beer or brand name"
        {% if results %}
          {% if results.search_term %}
            value="{{ results.search_term }}"
          {% endif %}
        {% endif %}>
      </div>
      <button type="submit" class="btn btn-default">Search</button>
    </form>

    <table class="table-responsive">
      {% if results %}
        {% if results.beers == results.not_found %}
          <tr class="col-sm-10">{{ results.not_found }}</tr>
        {% elif results.beers == results.no_similar_beers %}
          <tr class="col-sm-10">{{ results.no_similar_beers }}</tr>
        {% else %}
          {% for beer in results.beers %}
            <tr>
              {% if beer.name.lower() != results.search_term.lower() %}
                <td>
                  {% if 'labels' in beer %}
                    <img src="{{ beer.labels.icon }}"/>
                  {% endif %}
                </td>
                <td>
                  <div>{{ beer.name }}</div>
                </td>
                <td>
                  <div>{{ beer.description }}</div>
                </td>
              {% endif %}
            </tr>
          {% endfor %}
        {% endif %}
      {% endif %}
    </table>
  </div>
{% endblock %}

{% block footer %}
  {% include "include/footer.html" %}
{% endblock %}

{% block scripts %}
  <link rel="stylesheet" href="{{ url_for('static', filename='vendor/jquery-ui/jquery-ui.css') }}">
  <script src="{{ url_for('static', filename='vendor/jquery-ui/jquery-ui.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/autocomplete.js') }}"></script>
{% endblock %}
